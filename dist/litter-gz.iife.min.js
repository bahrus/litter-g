!function(){function t(t){let e=t.is;customElements.get(e)?console.warn("Already registered "+e):customElements.define(e,t)}function e(t){let e=t;for(;e=e.parentNode;){if(11===e.nodeType)return e.host;if("BODY"===e.tagName)return null}return null}function n(t,e,n,i,r){const s=customElements.get(t),o=s._count++,c=document.createElement("script");"noModule"in document.createElement("script")&&(c.type="module"),c.innerHTML=`\n${r}\n(function () {\n${i}\nconst constructor = customElements.get('${t}');\nconstructor['fn_' + ${o}] = __fn;\n})();\n`,document.head.appendChild(c),function t(e,n,i,r){const s=e["fn_"+n];if(void 0===s)return void setTimeout(()=>{t(e,n,i,r)},10);i[r]=s}(s,o,e,n)}const i=(t,e)=>{let n;return function(){clearTimeout(n),n=setTimeout(()=>t.apply(this,arguments),e)}};class r extends(function(t){const n=["animationstart","MSAnimationStart","webkitAnimationStart"];return class extends t{addCSSListener(t,i,r){if(this._boundInsertListener)return;const s=`\n            @keyframes ${t} {\n                from {\n                    opacity: 0.99;\n                }\n                to {\n                    opacity: 1;\n                }\n            }\n    \n            ${i}{\n                animation-duration: 0.001s;\n                animation-name: ${t};\n            }\n            `,o=document.createElement("style");o.innerHTML=s;const c=e(this);null!==c?c.shadowRoot.appendChild(o):document.body.appendChild(o),this._boundInsertListener=r.bind(this);const a=c?c.shadowRoot:document;n.forEach(t=>{a.addEventListener(t,this._boundInsertListener,!1)})}disconnectedCallback(){if(this._boundInsertListener){const t=e(this),i=t?t.shadowRoot:document;n.forEach(t=>{i.removeEventListener(t,this._boundInsertListener)})}void 0!==super.disconnectedCallback&&super.disconnectedCallback()}}}(HTMLElement)){static get is(){return"litter-g"}insertListener(t){if(t.animationName===r.is){const e=t.target;setTimeout(()=>{!function t(e,n){e._script=e.querySelector("script"),e._script?n():setTimeout(()=>{t(e,n)},10)}(e,()=>{this.registerScript(e)})},0)}}defGenProp(t,e){}commitProps(t,e){t.forEach(t=>{const n=e[t];switch(t){case"renderer":case"input":case"target":Object.defineProperty(e,t,{get:function(){return this["_"+t]},set:function(n){this["_"+t]=n,this.input&&this.renderer&&!this.hasAttribute("disabled")&&this.renderer(this.input,this.target||e)},enumerable:!0,configurable:!0});break;default:this.defGenProp(e,t)}void 0!==n&&(e[t]=n)})}addProps(t,e){if(!t.dataset.addedProps&&(this.commitProps(e.args.concat("renderer","input","target"),t),t.dataset.addedProps="true",!t.input)){const e=t.dataset.input;e&&(t.input=JSON.parse(e))}}getScript(t){return{args:["input"],body:t.innerHTML}}registerScript(t){const e="https://cdn.jsdelivr.net/npm/lit-html/";let i=`\n        import {html, render} from '${e}lit-html.js';\n        import {repeat} from '${e}lib/repeat.js';\n`;const s=this.getAttribute("import");null!==s&&(i=self[s]);r._count++;const o=this.getScript(t._script),c=`\nconst litterG = customElements.get('litter-g');\nconst litter = (${o.args.length>1?"{"+o.args.join(",")+"}":"input"}) => ${o.body};\nconst __fn = function(input, target){\n    render(litter(input), target);\n}    \n`;this.addProps(t,o),n(r.is,t,"renderer",c,i)}connectedCallback(){this.style.display="none",this._connected=!0,this.onPropsChange()}onPropsChange(){this._connected&&this.addCSSListener(r.is,"[data-lit]",this.insertListener)}}r._count=0,t(r);t(class extends r{static get is(){return"litter-gz"}getScript(t){const e=function(t){const e=t.innerHTML.trim();if(e.startsWith("(")||e.startsWith("tr = ")){const t=self.xtal_latx_ied;if(void 0!==t)return t(e);{const t=e.indexOf("=>"),n=["(",")","{","}"];let i=e.substr(0,t).replace("tr = ","").trim();n.forEach(t=>i=i.replace(t,""));const r=e.substr(t+2);return{args:i.split(",").map(t=>t.trim()),body:r}}}return null}(t);return null===e?super.getScript(t):e}defGenProp(t,e){!function(t,e,n="input"){let r=t._debouncers;r||(r=t._debouncers={});let s=r[n];s||(s=r[n]=i(()=>{t[n]=Object.assign({},t[n])},10)),Object.defineProperty(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,this[n]?(this[n][e]=t,s()):this[n]={[e]:t}},enumerable:!0,configurable:!0})}(t,e)}})}();